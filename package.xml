<?xml version="1.0" encoding="utf-8"?>
<package
  name="ROfSim"
  displayName="ROF SyncroSim Package"
  version="0.0.1">
  <transformers>
    <transformer name="Primary" isPrimary="True">
      <runtime>
        <transformer name="ProcessSpadesOutputs"/>
        <transformer name="RunCaribouRSF"/>
      </runtime>
    </transformer>
    <transformer
      name="ProcessSpadesOutputs"
      userRunnable="True"
      runContext="LocalOnly"
      programName="Rscript"
      programArguments="process_spades_outputs.R">
      <datafeeds>
        <datafeed name="InputSpadesObject" displayName="Input SpaDES Object" dataScope="Scenario">
          <datasheets>
            <datasheet name="InputSpadesObjectFilePath" displayName="Input SpaDES Object File Path">
              <columns>
                <column name="ScenarioID" dataType="Integer" />
                <!-- <column name="Iteration" dataType="Integer" format="d"/> -->
                <!-- <column name="Timestep" dataType="Integer" displayNameSource="stsim_Terminology" displayNameColumn="TimestepUnits" format="d"/> -->
                <!-- <column name="StateClassID" dataType="Integer" displayName="State Class" validationType="Datasheet" formula1="StateClass" allowDbNull="False"/> -->
                <column name="Filename" displayName="Spades Object Path" dataType="String" allowDbNull="False" isExternalFile="True"/>
              </columns>
            </datasheet>
          </datasheets>
        </datafeed>
      </datafeeds>
    </transformer>
    <transformer
      name="RunCaribouRSF"
      userRunnable="True"
      runContext="LocalOnly"
      programName="Rscript"
      programArguments="run_caribou_model.R">
      <datafeed name="Stratum" dataScope="Project" displayNameSource="Terminology" displayNameColumn="PrimaryStratumLabel">
          <datasheets>
            <datasheet name="Stratum" valueMember="StratumID" displayMember="Name" displayNameSource="Terminology" displayNameColumn="PrimaryStratumLabel">
              <columns>
                <column name="StratumID" dataType="Integer" isPrimary="True"/>
                <column name="ProjectID" dataType="Integer"/>
                <column name="Name" dataType="String" fillWeight="10"/>
                <column name="ID" dataType="Integer" isOptional="True" fillWeight="5" validationType="WholeNumber" validationCondition="GreaterEqual" formula1="0"/>
                <column name="Color" dataType="String" isOptional="True" isReadOnly="True" autoSizeMode="None" width="35"/>
                <column name="Legend" displayName="Map Legend" dataType="String" isOptional="True" fillWeight="20"/>
                <column name="Description" dataType="String" isOptional="True" fillWeight="20"/>
              </columns>
              <validations>
                <validation validationType="UniqueOrNull" columns="ID"/>
              </validations>
            </datasheet>
          </datasheets>
        </datafeed>
    </transformer>
  </transformers>
  <layouts>
    <layout name="coreforms_LibraryDatafeeds">
      <item name="core_Rconfig"/>
    </layout>
    <layout name="coreforms_ProjectDatafeeds">
      <group name="Strata">
        <item name="Stratum"/>
      </group>
    <layout name="coreforms_ScenarioDatafeeds">
      <item name="InputSpadesObject"/>
    </layout>
  </layouts>
</package>